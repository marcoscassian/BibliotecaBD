{% extends "base.html" %}
{% block title %}{{ 'Editar Usuário' if usuario else 'Novo Usuário' }}{% endblock %}

{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='geral_form.css') }}">

<h2>{{ 'Editar Usuário' if usuario else 'Novo Usuário' }}</h2>

<form method="post" class="formulario">

    <div class="grupo-campo">
        <label>Nome</label>
        <input type="text" name="Nome_usuario" required
               value="{{ usuario.Nome_usuario if usuario else '' }}">
    </div>

    <div class="grupo-campo">
        <label>Email</label>
        <input type="email" name="Email" required
               value="{{ usuario.Email if usuario else '' }}">
    </div>

    <div class="grupo-campo">
        <label>Telefone</label>
        <input type="text" name="Numero_telefone"
               value="{{ usuario.Numero_telefone if usuario else '' }}">
    </div>

    <div class="grupo-campo">
        <label>Data de inscrição</label>
        <input type="date" name="Data_inscricao"
               value="{{ usuario.Data_inscricao if usuario and usuario.Data_inscricao else '' }}"
               placeholder="Preenchido automaticamente se vazio">
    </div>

    <div class="grupo-campo">
        <label>Status</label>
        <select name="Status">
            <option value="" {% if not usuario %}selected{% endif %}>Selecionar Status</option>
            <option value="ativo" {% if usuario and usuario.Status == 'ativo' %}selected{% endif %}>Ativo</option>
            <option value="inativo" {% if usuario and usuario.Status == 'inativo' %}selected{% endif %}>Inativo</option>
        </select>
        <small style="color: #666; font-size: 0.85em;">Usuários inativos não podem realizar empréstimos</small>
    </div>

    <div class="grupo-campo">
        <label>Multa atual (R$)</label>
        <input type="number" step="0.01" name="Multa_atual"
               value="{{ usuario.Multa_atual if usuario else '0.00' }}">
        <small style="color: #666; font-size: 0.85em;">Multa calculada automaticamente em caso de atraso (R$ 2,00/dia)</small>
    </div>

    <div class="botoes-formulario">
        <button type="submit" class="botao botao-verde">Salvar</button>
        <a href="{{ url_for('usuarios.listar_usuarios') }}" class="botao botao-cinza">Cancelar</a>
    </div>

</form>
{% endblock %}
